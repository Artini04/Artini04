---
import { Image } from "astro:assets"

interface Props {
	title: string
	description: string
	link: string
	type: string[]
	pinned: boolean

	"cover-img": string
	"cover-alt": string
}

const {
	title,
	description,
	link,
	type,
	pinned,
	"cover-img": coverImg,
	"cover-alt": coverAlt,
} = Astro.props
---

<a class="project" href={link} target="_blank" data-pinned={pinned}>
	<div class="project-media">
		{
			coverImg.length == 0 ?
				<div class="project__img-none">No image provided!</div>
			:	<Image
					class="project__img"
					src={coverImg}
					alt={coverAlt}
					loading="lazy"
					width={1024}
					height={768}
				/>
		}
	</div>
	<div class="project-description">
		<p class="project__title">{title}</p>
		<p class="project__description">{description}</p>
		<div class="project-description-type">
			{type.map((element) => <p class="project__type">{element}</p>)}
		</div>
	</div>
</a>

<style lang="scss">
	@use "@styles/modules/utilities" as utils;

	$project-media-size: 30%;

	.project {
		display: flex;
		flex-flow: row nowrap;

		border: var(--global-border);
		border-radius: var(--global-border-radius);
		outline: 1px solid transparent;
		overflow: clip;

		@include utils.use-transition("outline");

		&:is(:hover) {
			outline: 0.2em solid white;
		}

		@container (width <= 600px) {
			flex-flow: column nowrap;
		}

		&-media {
			flex: 1 1 $project-media-size;
		}

		&-description {
			flex: 1 1 calc(100% - $project-media-size);
			padding: 0.6em;

			display: flex;
			flex-flow: column nowrap;
			gap: 0.2em 0;
		}

		&-description-type {
			display: flex;
			flex-flow: row wrap;
			gap: 0.2em;
		}

		// Image
		&__img {
			width: 100%;
			height: 100%;

			max-height: 150px;
			object-fit: cover;
		}

		// Contents
		&__title {
			font-weight: bolder;
			font-size: 1.2em;
			line-height: 1.2;
		}

		&__description {
			flex: 1 1 auto;
			font-size: 0.8em;
		}

		&__type {
			font-size: 0.6em;
			padding: 0.3em 0.6em 0.1em;
			width: fit-content;

			background-color: hsl(0, 0%, 15%);
			border-radius: 25px;
		}
	}
</style>
